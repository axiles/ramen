-- vim: ft=sql expandtab

DEFINE s1 AS YIELD sum globally 3 - 2 AS n EVERY 0.01 SECONDS;
DEFINE s2 AS YIELD sum globally 3 - 1 AS n EVERY 0.02 SECONDS;
DEFINE s3 AS YIELD sum globally 3 - 0 AS n EVERY 9999 SECONDS;

DEFINE m AS
  FROM s1, s2, s3
  MERGE ON n TIMEOUT AFTER 0.1 SECOND
  SELECT n
  WHERE sum globally 1 < 7;
