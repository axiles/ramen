// vim:filetype=asciidoc expandtab spell spelllang=en ts=2 sw=2
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
:imagesdir: https://github.com/rixed/ramen/raw/master/docs/
endif::[]

= Release Process
:icons:
:lang: en
:encoding: utf-8

1. Upgrade version number in +configure.ac+. Run +autoconf+ as the
   +configure+ script is in git.

2. `git commit -m 'Bump version to ${new_version}' && git push`

3. `git tag v${new_version} && git push --tags`

4. `./configure && make && make reinstall bin_dir=~/.opam/ramen/bin && make bundle && make deb`

5. Copy the generated +.deb+ file into the +docker+ subdirectory.

6. Optionally, `docker pull debian:stretch` and docker pull `debian:jessie`

7. build the final image: `make docker-build-image`

8. Push all the images: `make docker-push`

